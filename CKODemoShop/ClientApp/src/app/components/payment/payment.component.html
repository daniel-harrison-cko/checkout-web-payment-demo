<mat-vertical-stepper [linear]="isLinear" #stepper>
  <mat-step [stepControl]="customerFormGroup">
    <form [formGroup]="customerFormGroup">
      <ng-template matStepLabel>Fill out your name and email</ng-template>
      <mat-form-field>
        <input matInput placeholder="Full name" formControlName="name" required>
      </mat-form-field><br />
      <mat-form-field>
        <input matInput placeholder="Email" formControlName="email" required>
      </mat-form-field>
      <div>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="addressFormGroup">
    <form [formGroup]="addressFormGroup">
      <ng-template matStepLabel>Fill out your address</ng-template>
      <mat-form-field>
        <input matInput placeholder="Address" formControlName="address_line1" required>
      </mat-form-field><br />
      <mat-form-field>
        <input matInput placeholder="Still Address" formControlName="address_line2">
      </mat-form-field><br />
      <mat-form-field>
        <input matInput placeholder="City" formControlName="city" required>
      </mat-form-field><br />
      <mat-form-field>
        <input matInput placeholder="State" formControlName="state" required>
      </mat-form-field><br />
      <mat-form-field>
        <input matInput placeholder="Postcode" formControlName="zip" required>
      </mat-form-field><br />
      <mat-form-field>
        <input matInput placeholder="Country" formControlName="country" required>
      </mat-form-field>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext (click)="createCustomer()">Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <form [formGroup]="paymentFormGroup">
      <ng-template matStepLabel>Verify&nbsp;&amp;&nbsp;Pay</ng-template>
      <app-verify-and-pay [customer]="customer"></app-verify-and-pay>
      <mat-divider></mat-divider>
      <mat-radio-group class="example-radio-group" formControlName="payment_method">
        <mat-radio-button class="example-radio-button" *ngFor="let paymentMethod of paymentMethods" [value]="paymentMethod">
          {{paymentMethod}}
        </mat-radio-button>
      </mat-radio-group>
      <mat-divider></mat-divider>
      <mat-checkbox class="gtc-checkbox" formControlName="gtc" required>{{gtcDisclaimer.i_have_read_and_agree}} <a href="{{gtcDisclaimer.g_t_c_uri}}" target="_blank">{{gtcDisclaimer.g_t_c}}</a>.<br />{{gtcDisclaimer.i_have_verified_and_want_to_pay}}{{paymentFormGroup.get('payment_method').value ? 'via ' + paymentFormGroup.get('payment_method').value : ''}}.</mat-checkbox>
      <div>
        <button mat-flat-button color="accent" [disabled]="paymentFormGroup.invalid || !paymentFormGroup.get('gtc').value" (click)="test()">Pay Now</button>
      </div>
    </form>
  </mat-step>
</mat-vertical-stepper>
